<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solicita√ß√£o de Parceria</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script>
    
    <style>
        html, body {
            margin: 0;
            padding: 0;
            overflow: hidden; /* Impede que o scroll cause loop infinito */
            height: auto;
            min-height: 100vh;
        }
    </style>
</head>
<body>

<div id="app-container" style="padding-bottom: 20px;">
    <div id="progress-container">
        <div id="progress-bg">
            <div id="progress-bar"></div>
        </div>
    </div>

    <form id="partner-form" onsubmit="return false;">
        
        <div class="step" data-step="1">
            <h2>Qual √© o seu nome completo?</h2>
            <div class="input-group">
                <input type="text" id="name" placeholder="Digite seu nome completo">
                <div class="error-msg">Este campo √© obrigat√≥rio</div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-primary btn-next">Pr√≥ximo</button>
            </div>
        </div>

        <div class="step hidden" data-step="2">
            <h2>Qual √© o seu e-mail?</h2>
            <div class="input-group">
                <input type="email" id="email" placeholder="exemplo@email.com">
                <div class="error-msg">Informe um e-mail v√°lido</div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary btn-prev">Voltar</button>
                <button class="btn btn-primary btn-next">Pr√≥ximo</button>
            </div>
        </div>

        <div class="step hidden" data-step="3">
            <h2>Qual o seu WhatsApp?</h2>
            <div class="input-group">
                <input type="tel" id="phone" placeholder="DDD + n√∫mero de telefone">
                <div class="error-msg">Informe um telefone v√°lido (apenas n√∫meros)</div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary btn-prev">Voltar</button>
                <button class="btn btn-primary btn-next">Pr√≥ximo</button>
            </div>
        </div>

        <div class="step hidden" data-step="4">
            <h2>Qual a sua cidade?</h2>
            <div class="input-group" style="position: relative;">
                <input type="text" id="city-input" placeholder="Digite sua cidade..." autocomplete="off">
                <div id="city-suggestions" class="autocomplete-list"></div>
                <div class="error-msg">Selecione uma cidade v√°lida da lista</div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary btn-prev">Voltar</button>
                <button class="btn btn-primary btn-next">Pr√≥ximo</button>
            </div>
        </div>

        <div class="step hidden" data-step="5">
            <h2>Qual seu @ perfil no Instagram?</h2>
            <div class="input-group">
                <input type="text" id="instagram" placeholder="@seuusu√°rio ou link do seu perfil">
                <div class="error-msg">Este campo √© obrigat√≥rio</div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary btn-prev">Voltar</button>
                <button class="btn btn-primary btn-next">Pr√≥ximo</button>
            </div>
        </div>

        <div class="step hidden" data-step="6">
            <h2>Qual o tipo de parceria voc√™ tem interesse?</h2>
            <div class="sub-label"> Selecione pelo menos uma op√ß√£o</div>
            <div class="checkbox-group" id="partnership-type-group">
                <label><input type="checkbox" value="Conte√∫dos para redes sociais"> Produzir conte√∫dos dos produtos PHS para divulgar em minhas redes sociais.</label>
                <label><input type="checkbox" value="Cursos, treinamentos e/ou Hands-on" id="chk-cursos"> Utilizar em meus cursos, treinamentos e/ou Hands-on.</label>
                <div class="error-msg">Selecione pelo menos uma op√ß√£o</div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary btn-prev">Voltar</button>
                <button class="btn btn-primary btn-next">Pr√≥ximo</button>
            </div>
        </div>

        <div class="step hidden" data-step="7">
            <h2>Quais marcas da PHS voc√™ utiliza atualmente?</h2>
            <div class="checkbox-group" id="brands-group">
                <label><input type="checkbox" value="Tokuyama" class="brand-opt"> Tokuyama</label>
                <label><input type="checkbox" value="Potenza" class="brand-opt"> Potenza</label>
                <label><input type="checkbox" value="Nic Tone" class="brand-opt"> Nic Tone</label>
                <label><input type="checkbox" value="Ainda n√£o utilizei" id="chk-brand-none"> Nenhuma, ser√° meu primeiro contato.</label>
                <div class="error-msg">Selecione pelo menos uma op√ß√£o</div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary btn-prev">Voltar</button>
                <button class="btn btn-primary btn-next">Pr√≥ximo</button>
            </div>
        </div>

        <div class="step hidden" data-step="8">
            <h2>E dos produtos da marca que voc√™ selecionou, quais voc√™ mais conhece e utiliza?</h2>
            <div class="sub-label">Pesquise produtos e clique para adicionar</div>
            <div id="products-tag-input-wrapper">
                </div>
            <div class="error-msg" id="err-p8">Selecione pelo menos um produto</div>
            <div class="nav-buttons">
                <button class="btn btn-secondary btn-prev">Voltar</button>
                <button class="btn btn-primary btn-next">Pr√≥ximo</button>
            </div>
        </div>

        <div class="step hidden" data-step="9">
            <h2>Qual o principal motivo de voc√™ ainda n√£o ter utilizado nossa linha de produtos Potenza?</h2>
            <div class="sub-label">Clareadores, dessensibilizantes, condicionadores √°cidos, pastas de polimento, etc...</div>
            <div class="radio-group" id="potenza-reason-group">
                <label><input type="radio" name="potenza_reason" value="Sem oportunidade"> Ainda n√£o tive oportunidade de testar.</label>
                <label><input type="radio" name="potenza_reason" value="Outras marcas"> Utilizo outras marcas.</label>
                <label><input type="radio" name="potenza_reason" value="N√£o adaptei"> Testei e n√£o me adaptei.</label>
                <label><input type="radio" name="potenza_reason" value="Outro" id="radio-potenza-other"> Outro.</label>
            </div>
            <input type="text" id="potenza-reason-other" placeholder="Escreva o motivo" class="hidden" style="margin-top:10px;">
            <div class="error-msg">Selecione uma das op√ß√µes</div>
            <div class="nav-buttons">
                <button class="btn btn-secondary btn-prev">Voltar</button>
                <button class="btn btn-primary btn-next">Pr√≥ximo</button>
            </div>
        </div>

        <div class="step hidden" data-step="10">
            <h2>Voc√™ tem interesse em testar e conhecer nossos produtos Potenza?</h2>
            <div class="radio-group" id="potenza-interest-bool">
                <label><input type="radio" name="potenza_interest" value="Sim" id="radio-interest-sim"> Sim</label>
                <label><input type="radio" name="potenza_interest" value="N√£o"> N√£o</label>
            </div>
            <div id="potenza-interest-tags" class="hidden" style="margin-top:15px;">
                <label>Escolha os produtos que gostaria:</label>
                <div id="potenza-interest-wrapper">
                    </div>
            </div>
            <div class="error-msg">Selecione pelo menos uma op√ß√£o</div>
            <div class="nav-buttons">
                <button class="btn btn-secondary btn-prev">Voltar</button>
                <button class="btn btn-primary btn-next">Pr√≥ximo</button>
            </div>
        </div>

        <div class="step hidden" data-step="11">
            <h2>Atualmente, voc√™ possui parcerias ativas no nosso segmento?</h2>
            <div class="sub-label">Marque e preencha</div>
            <div class="checkbox-group" id="active-partnerships-group">
                <label style="flex-direction: column; align-items: flex-start;">
                    <div style="display:flex; align-items:center;">
                        <input type="checkbox" id="chk-dentais"> Tenho parceria com dentais.
                    </div>
                    <input type="text" id="input-dentais" placeholder="Liste as dentais" class="hidden" style="margin-top:5px; width:100%;">
                </label>
                <label style="flex-direction: column; align-items: flex-start;">
                    <div style="display:flex; align-items:center;">
                        <input type="checkbox" id="chk-empresas"> Tenho parcerias com outras empresas.

                    </div>
                    <input type="text" id="input-empresas" placeholder="Liste as empresas" class="hidden" style="margin-top:5px; width:100%;">
                </label>
                <label><input type="checkbox" id="chk-no-partners"> N√£o possuo parcerias ativas.</label>
                <div class="error-msg">Selecione uma op√ß√£o v√°lida</div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary btn-prev">Voltar</button>
                <button class="btn btn-primary btn-next">Pr√≥ximo</button>
            </div>
        </div>

        <div class="step hidden" data-step="12">
            <h2>Existe contrato de exclusividade com suas parcerias ativas?</h2>
            <div class="radio-group" id="exclusivity-group">
                <label style="flex-direction: column; align-items: flex-start;">
                    <div style="display:flex; align-items:center;">
                        <input type="radio" name="exclusivity" value="Sim" id="radio-excl-sim"> Sim, possuo exclusividade.
                    </div>
                    <input type="text" id="input-exclusivity" placeholder="Detalhes da exclusividade" class="hidden" style="margin-top:5px; width:100%;">
                </label>
                <label><input type="radio" name="exclusivity" value="N√£o"> N√£o possuo exclusividade.</label>
            </div>
            <div class="error-msg">Preencha este campo</div>
            <div class="nav-buttons">
                <button class="btn btn-secondary btn-prev">Voltar</button>
                <button class="btn btn-primary btn-next">Pr√≥ximo</button>
            </div>
        </div>

        <div class="step hidden" data-step="13">
            <h2>Cadastre informa√ß√µes de um ou mais cursos que voc√™ gostaria de parceria.</h2>
            <div class="sub-label">Se tiver mais de um tipo, cadastre ao menos um de cada como exemplo. Queremos entender melhor sobre o formato e como podemos ajud√°-lo.</div>
            
            <div id="courses-list"></div>

            <button id="btn-show-course-form" class="btn-dashed">+ Adicionar Curso</button>

            <div id="course-form-container" class="hidden">
                <div class="course-form-box">
                    <h3 id="form-course-title">Adicionar Novo Curso</h3>
                    
                    <label>Nome do Curso *</label>
                    <input type="text" id="c-name" class="course-input">
                    
                    <label style="margin-top:15px">Tipo * (Pode selecionar mais de um)</label>
                    <div class="checkbox-group" id="c-type-group">
                        <label><input type="checkbox" value="Te√≥rico"> Te√≥rico</label>
                        <label><input type="checkbox" value="Pr√°tico"> Pr√°tico</label>
                        <label><input type="checkbox" value="Hands-on"> Hands-on</label>
                        <label><input type="checkbox" value="Curso Vip"> Curso Vip</label>
                        <label><input type="checkbox" value="P√≥s-gradua√ß√£o"> P√≥s-gradua√ß√£o</label>
                        <label><input type="checkbox" value="Imers√£o"> Imers√£o</label>
                        <label style="flex-wrap: wrap;">
                            <input type="checkbox" value="Outro" id="chk-ctype-other"> Outro 
                            <input type="text" id="c-type-other-text" placeholder="Escreva o tipo de curso" class="hidden" style="margin-left: 10px; flex-grow: 1; padding: 5px;">
                        </label>
                    </div>

                    <label style="margin-top:15px">Onde voc√™ costuma realizar?*</label>
                    <div class="sub-label">Liste cidades, estados, regi√µes, pa√≠ses.</div>
                    <input type="text" id="c-region" class="course-input">

                    <label style="margin-top:15px">Com qual frequ√™ncia acontece esse curso? *</label>
                    <div class="radio-group" id="c-freq-group">
                        <label><input type="radio" name="c_freq" value="Datas fixas e definidas com anteced√™ncia"> Datas fixas e definidas com anteced√™ncia.</label>
                        <label><input type="radio" name="c_freq" value="De acordo com demanda"> Data vari√°vel, de acordo com demanda.</label>
                    </div>

                    <label style="margin-top:15px">Qual costuma ser a dura√ß√£o m√©dia ou total desse curso? *</label>
                    <div class="sub-label">Ex: ‚Äú44h total‚Äù, ‚Äú2 finais de semana 4h cada dia‚Äù, ‚Äú1 semestre‚Äù</div>
                    <input type="text" id="c-duration" class="course-input">

                    <label style="margin-top:15px">Qual costuma ser a m√©dia de participantes/inscritos? *</label>
                    <input type="text" id="c-students" class="course-input">

                    <label style="margin-top:15px">Material de Divulga√ß√£o</label>
                    <div class="sub-label">Link para o site, p√°gina, apresenta√ß√£o ou arte que s√£o utilizados na divulga√ß√£o</div>
                    <input type="text" id="c-link-divulgacao" class="course-input" placeholder="https://...">

                    <label style="margin-top:15px">Material de Conte√∫do do Curso</label>
                    <div class="sub-label">Link para apresenta√ß√£o das aulas, resultados cl√≠nicos de alunos, materiais educativos e/ou fotos das edi√ß√µes anteriores</div>
                    <input type="text" id="c-link-conteudo" class="course-input" placeholder="https://...">

                    <div class="error-msg" id="course-add-error" style="margin-bottom: 15px;">Preencha todos os campos obrigat√≥rios (*).</div>

                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button class="btn btn-secondary" id="btn-cancel-course" style="width: auto;">Cancelar</button>
                        <button class="btn btn-action" id="btn-save-course" style="margin-top:0;">Salvar Curso</button>
                    </div>
                </div>
            </div>
            
            <div class="error-msg" id="course-list-error">Adicione pelo menos um curso para continuar</div>

            <div class="nav-buttons">
                <button class="btn btn-secondary btn-prev">Voltar</button>
                <button class="btn btn-primary btn-submit">Concluir Solicita√ß√£o</button>
            </div>
        </div>

    </form>

    <div id="loading-overlay" class="hidden">
        <div class="spinner"></div>
        <p>Enviando seus dados...</p>
    </div>

    <div id="success-screen" class="hidden">
        <div class="success-icon">‚úì</div>
        <h2>Obrigado pelo cadastro!</h2>
        <p>Nossa equipe ir√° avaliar e responder sua solicita√ß√£o assim que poss√≠vel.
Fique de olho no e-mail e WhatsApp cadastrados üòâ</p>
    </div>

</div>

<script>
    let ultimaAlturaEnviada = 0;

    // Fun√ß√£o que calcula a altura e envia para o 'pai' (RD Station)
    function enviarAlturaParaOIframe() {
        // Mede o container de conte√∫do, n√£o o body inteiro
        const container = document.getElementById('app-container');
        if (!container) return;

        const alturaAtual = container.scrollHeight;
        
        // --- TRAVA DE SEGURAN√áA ---
        // S√≥ envia se a diferen√ßa for maior que 15px para evitar loops infinitos
        if (Math.abs(alturaAtual - ultimaAlturaEnviada) > 15) {
            ultimaAlturaEnviada = alturaAtual;
            // Envia mensagem para qualquer origem (*)
            window.parent.postMessage({ iframeHeight: alturaAtual }, '*');
        }
    }

    // 1. Enviar ao carregar
    window.addEventListener('load', () => setTimeout(enviarAlturaParaOIframe, 100));

    // 2. Enviar ao redimensionar a janela (com debounce leve)
    let resizeTimer;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(enviarAlturaParaOIframe, 200);
    });

    // 3. Monitorar mudan√ßas no DOM
    const observer = new MutationObserver((mutations) => {
        // Verifica se a mudan√ßa √© relevante
        enviarAlturaParaOIframe();
    });
    
    // Observa o container principal em vez do body inteiro
    const appContainer = document.getElementById('app-container');
    if (appContainer) {
        observer.observe(appContainer, { 
            attributes: true, 
            childList: true, 
            subtree: true 
        });
    }
</script>

</body>
</html>
